# Shelf Lock Addon

マインクラフト統合版（Bedrock Edition）用のアドオンです。棚ブロックからプレイヤーが手動でアイテムを取り出すことを防ぐ機能を提供します。

## 機能

- **棚ブロックの完全ロック**: アイテムの取り出しと配置の両方をブロック
- **全種類の棚に対応**: 樫、トウヒ、シラカバ、ジャングル、アカシア、ダークオーク、マングローブ、桜、淡い樫、竹、真紅、歪んだ棚に対応
- **管理者コマンド**: ゲーム内でロックのON/OFFを切り替え
- **永続的な設定**: サーバー再起動後も設定が保持される

## インストール方法

### 1. 前提条件
- マインクラフト統合版 バージョン 1.20.0 以上
- 管理者権限（OP権限またはクリエイティブモード）

### 2. アドオンの導入
1. このフォルダ全体を以下のディレクトリにコピー:
   ```
   %localappdata%\Packages\Microsoft.MinecraftUWP_8wekyb3d8bbwe\
   LocalState\games\com.mojang\development_behavior_packs\
   ```

2. マインクラフトを起動し、ワールド設定を開く

3. **「実験的機能」**を有効化:
   - 「ベータAPI」を**ON**にする（重要！）

4. **「ビヘイビアパック」**セクションで本アドオンを有効化

5. ワールドに入る

## 使い方

### コマンド

#### ロックを有効化
```
/addon:shelflock on
```

全ての棚ブロックへの操作（取り出し・配置）が禁止されます。

#### ロックを無効化
```
/addon:shelflock off
```

通常通り棚への操作が可能になります。

#### 現在の状態を確認
```
/addon:shelflock
```

引数なしで実行すると、現在のロック状態が表示されます。

### 動作例

#### ロック有効時
- **空の手で棚をクリック**: アイテムの取り出しがブロックされ、メッセージが表示される
- **アイテムを持って棚をクリック**: アイテムの配置がブロックされ、メッセージが表示される
- **全ての棚への操作が禁止される**

#### ロック無効時
- すべての操作が通常通り動作（取り出し・配置ともに可能）

### 対応ブロック一覧

以下の12種類の棚ブロックに対応しています:

1. 樫の棚 (Oak Shelf)
2. トウヒの棚 (Spruce Shelf)
3. シラカバの棚 (Birch Shelf)
4. ジャングルの棚 (Jungle Shelf)
5. アカシアの棚 (Acacia Shelf)
6. ダークオークの棚 (Dark Oak Shelf)
7. マングローブの棚 (Mangrove Shelf)
8. 桜の棚 (Cherry Shelf)
9. 淡い樫の棚 (Pale Oak Shelf)
10. 竹の棚 (Bamboo Shelf)
11. 真紅の棚 (Crimson Shelf)
12. 歪んだ棚 (Warped Shelf)

## 重要な制限事項

### 自動化システムによる取得は防げません

このアドオンは**プレイヤーの手動操作のみ**をブロックします。以下の自動化手段は防げません:

- ホッパー
- ドロッパー
- ホッパー付きトロッコ

これらの自動化システムを使った本の取り出しを防ぐには、物理的にホッパーを設置できないようにするなど、別の対策が必要です。

### 管理者権限が必要

コマンドを実行するには以下のいずれかが必要です:
- オペレーター（OP）権限
- クリエイティブモード

サバイバルモードの一般プレイヤーはコマンドを実行できません。

## トラブルシューティング

### コマンドが実行できない
- **実験的機能「ベータAPI」が有効になっているか確認**してください
- 管理者権限があるか確認してください
- コマンドのスペルミスがないか確認してください

### アイテムが取り出せない（意図しない動作）
- ロック状態を確認: `/addon:shelflock`
- ロックを無効化: `/addon:shelflock off`

### アドオンが読み込まれない
1. ワールド設定でビヘイビアパックが有効になっているか確認
2. 実験的機能「ベータAPI」が有効になっているか確認
3. マインクラフトを再起動してみる

### ホッパーでアイテムが取られる
これは仕様です（制限事項を参照）。ホッパーによる取り出しは防げません。

## 技術情報

### 使用API
- `@minecraft/server` v2.0.0-beta

### 主要機能
- Dynamic Properties: 設定の永続化
- Custom Commands: カスタムコマンド登録
- Before Events: イベントの事前キャンセル

### ファイル構造
```
BookshelfBarrier/
├── manifest.json         # パック設定
├── scripts/
│   └── main.js          # メインロジック
├── README.md            # このファイル
└── __think__/           # 開発用ドキュメント
    ├── bookshelfbarrier.txt
    └── implementation_plan.md
```

## ライセンス

このアドオンは自由に使用・改変・配布できます。

## 開発情報

詳細な技術仕様や実装計画については、`__think__/` ディレクトリ内のドキュメントを参照してください。

---

## バージョン履歴

### v1.0.0 (初回リリース)
- 基本機能の実装
- 全12種類の棚ブロックに対応
- 取り出しと配置の両方をロック
- カスタムコマンドによる管理
- Dynamic Propertiesによる永続化
